package(load_event_b_project([event_b_model(none,m2,[sees(none,[c1,c2]),refines(none,m1),variables(none,[identifier(none,bal),identifier(none,ended),identifier(none,idle),identifier(none,lfrom),identifier(none,pending),identifier(none,pfrom),identifier(none,recover),identifier(none,trans)]),invariant(none,[subset(rodinpos(inv1,internal_inv1),identifier(none,trans),identifier(none,'TRANS')),subset(rodinpos(inv2,internal_inv2),identifier(none,idle),identifier(none,trans)),subset(rodinpos(inv3,internal_inv3),identifier(none,pending),identifier(none,trans)),subset(rodinpos(inv4,internal_inv4),identifier(none,recover),identifier(none,trans)),subset(rodinpos(inv5,internal_inv5),identifier(none,ended),identifier(none,trans)),member(rodinpos(inv6,internal_element1),identifier(none,bal),total_function(none,identifier(none,purse),natural_set(none))),forall(rodinpos(inv7,internal_inv6),[identifier(none,t)],implication(none,member(none,identifier(none,t),identifier(none,trans)),not_equal(none,function(none,identifier(none,from),[identifier(none,t)]),function(none,identifier(none,to),[identifier(none,t)])))),finite(rodinpos(inv9,internal_element2),identifier(none,pending)),equal(rodinpos(inv10,internal_element3),intersection(none,identifier(none,idle),identifier(none,pending)),empty_set(none)),member(rodinpos(inv11,internal_inv8),identifier(none,pfrom),relations(none,identifier(none,purse),identifier(none,'TRANS'))),equal(rodinpos(inv12,internal_inv9),range(none,identifier(none,pfrom)),identifier(none,pending)),forall(rodinpos(inv13,internal_inv10),[identifier(none,p)],implication(none,member(none,identifier(none,p),identifier(none,purse)),equal(none,function(none,identifier(none,abal),[identifier(none,p)]),add(none,function(none,identifier(none,bal),[identifier(none,p)]),function(none,identifier(none,sum),[image(none,identifier(none,pfrom),set_extension(none,[identifier(none,p)]))]))))),member(rodinpos(inv8,internal_inv7),reverse(none,identifier(none,pfrom)),partial_function(none,identifier(none,'TRANS'),identifier(none,purse))),member(rodinpos(inv14,internal_inv11),identifier(none,lfrom),relations(none,identifier(none,purse),identifier(none,'TRANS'))),equal(rodinpos(inv15,internal_inv12),range(none,identifier(none,lfrom)),identifier(none,recover)),finite(rodinpos(inv19,internal_inv16),identifier(none,recover)),member(rodinpos(inv16,internal_inv13),reverse(none,identifier(none,lfrom)),partial_function(none,identifier(none,'TRANS'),identifier(none,purse))),forall(rodinpos(inv17,internal_inv14),[identifier(none,p)],implication(none,member(none,identifier(none,p),identifier(none,purse)),equal(none,function(none,identifier(none,lost),[identifier(none,p)]),function(none,identifier(none,sum),[image(none,identifier(none,lfrom),set_extension(none,[identifier(none,p)]))])))),equal(rodinpos(inv18,internal_inv15),intersection(none,identifier(none,pending),identifier(none,recover)),empty_set(none)),equal(rodinpos(inv20,internal_inv17),intersection(none,identifier(none,idle),identifier(none,recover)),empty_set(none))]),theorems(none,[forall(rodinpos(thm1,internal_thm1),[identifier(none,p)],implication(none,member(none,identifier(none,p),identifier(none,purse)),finite(none,image(none,identifier(none,pfrom),set_extension(none,[identifier(none,p)]))))),forall(rodinpos(thm2,internal_thm2),[identifier(none,p)],implication(none,member(none,identifier(none,p),identifier(none,purse)),finite(none,image(none,identifier(none,lfrom),set_extension(none,[identifier(none,p)])))))]),events(none,[event(rodinpos('INITIALISATION',internal_evt1),'INITIALISATION',['INITIALISATION'],[],[],[assign(rodinpos(act1,internal_act1),[identifier(none,bal)],[cartesian_product(none,identifier(none,purse),set_extension(none,[integer(none,0)]))]),assign(rodinpos(act3,internal_act3),[identifier(none,trans)],[empty_set(none)]),assign(rodinpos(act4,internal_act4),[identifier(none,idle)],[empty_set(none)]),assign(rodinpos(act5,internal_act5),[identifier(none,pending)],[empty_set(none)]),assign(rodinpos(act6,internal_act6),[identifier(none,recover)],[empty_set(none)]),assign(rodinpos(act7,internal_act7),[identifier(none,ended)],[empty_set(none)]),assign(rodinpos(act8,internal_act8),[identifier(none,pfrom)],[empty_set(none)]),assign(rodinpos(act9,internal_act9),[identifier(none,lfrom)],[empty_set(none)])],[]),event(rodinpos('Start',internal_evt3),'Start',[],[identifier(rodinpos([],internal_var4),a),identifier(rodinpos([],internal_var2),p1),identifier(rodinpos([],internal_var3),p2),identifier(rodinpos([],internal_var1),t)],[member(rodinpos(grd1,internal_grd1),identifier(none,t),set_subtraction(none,identifier(none,'TRANS'),identifier(none,trans))),member(rodinpos(grd2,internal_grd2),identifier(none,p1),identifier(none,purse)),member(rodinpos(grd3,internal_grd3),identifier(none,p2),identifier(none,purse)),member(rodinpos(grd4,internal_grd4),identifier(none,a),natural_set(none)),not_equal(rodinpos(grd5,internal_grd5),identifier(none,p1),identifier(none,p2)),equal(rodinpos(grd6,internal_grd6),function(none,identifier(none,from),[identifier(none,t)]),identifier(none,p1)),equal(rodinpos(grd7,internal_grd7),function(none,identifier(none,to),[identifier(none,t)]),identifier(none,p2)),equal(rodinpos(grd8,internal_grd8),function(none,identifier(none,am),[identifier(none,t)]),identifier(none,a))],[assign(rodinpos(act1,internal_act1),[identifier(none,trans)],[union(none,identifier(none,trans),set_extension(none,[identifier(none,t)]))]),assign(rodinpos(act2,internal_act2),[identifier(none,idle)],[union(none,identifier(none,idle),set_extension(none,[identifier(none,t)]))])],[]),event(rodinpos('Deduct',internal_evt4),'Deduct',[],[identifier(rodinpos([],internal_var4),a),identifier(rodinpos([],internal_var2),p1),identifier(rodinpos([],internal_var3),p2),identifier(rodinpos([],internal_var1),t)],[member(rodinpos(grd1,internal_grd1),identifier(none,t),identifier(none,idle)),member(rodinpos(grd2,internal_grd2),identifier(none,p1),identifier(none,purse)),member(rodinpos(grd3,internal_grd3),identifier(none,p2),identifier(none,purse)),member(rodinpos(grd4,internal_grd4),identifier(none,a),natural_set(none)),less_equal(rodinpos(grd5,internal_grd5),identifier(none,a),function(none,identifier(none,bal),[identifier(none,p1)])),equal(rodinpos(grd6,internal_grd6),identifier(none,p1),function(none,identifier(none,from),[identifier(none,t)])),equal(rodinpos(grd7,internal_grd7),identifier(none,p2),function(none,identifier(none,to),[identifier(none,t)])),equal(rodinpos(grd8,internal_grd8),identifier(none,a),function(none,identifier(none,am),[identifier(none,t)]))],[assign(rodinpos(act1,internal_act1),[identifier(none,pending)],[union(none,identifier(none,pending),set_extension(none,[identifier(none,t)]))]),assign(rodinpos(act2,internal_act2),[identifier(none,idle)],[set_subtraction(none,identifier(none,idle),set_extension(none,[identifier(none,t)]))]),assign(rodinpos(act3,internal_act3),[identifier(none,bal)],[overwrite(none,identifier(none,bal),set_extension(none,[couple(none,[identifier(none,p1),minus(none,function(none,identifier(none,bal),[identifier(none,p1)]),identifier(none,a))])]))]),assign(rodinpos(act4,element1),[identifier(none,pfrom)],[union(none,identifier(none,pfrom),set_extension(none,[couple(none,[identifier(none,p1),identifier(none,t)])]))])],[]),event(rodinpos('Increase',internal_evt2),'Increase',['TransferOk'],[identifier(rodinpos([],internal_var3),a),identifier(rodinpos([],internal_var1),p1),identifier(rodinpos([],internal_var2),p2),identifier(rodinpos([],internal_var4),t)],[member(rodinpos(grd6,internal_grd6),identifier(none,t),identifier(none,pending)),member(rodinpos(grd1,internal_grd1),identifier(none,p1),identifier(none,purse)),member(rodinpos(grd4,internal_grd4),identifier(none,p2),identifier(none,purse)),member(rodinpos(grd5,internal_grd5),identifier(none,a),natural_set(none)),equal(rodinpos(grd2,internal_grd2),function(none,identifier(none,from),[identifier(none,t)]),identifier(none,p1)),equal(rodinpos(grd3,internal_grd3),function(none,identifier(none,to),[identifier(none,t)]),identifier(none,p2)),equal(rodinpos(grd7,internal_grd7),function(none,identifier(none,am),[identifier(none,t)]),identifier(none,a)),member(rodinpos(grd8,internal_grd8),couple(none,[identifier(none,p1),identifier(none,t)]),identifier(none,pfrom))],[assign(rodinpos(act1,internal_act1),[identifier(none,bal)],[overwrite(none,identifier(none,bal),set_extension(none,[couple(none,[identifier(none,p2),add(none,function(none,identifier(none,bal),[identifier(none,p2)]),identifier(none,a))])]))]),assign(rodinpos(act2,internal_act2),[identifier(none,ended)],[union(none,identifier(none,ended),set_extension(none,[identifier(none,t)]))]),assign(rodinpos(act3,internal_act3),[identifier(none,pending)],[set_subtraction(none,identifier(none,pending),set_extension(none,[identifier(none,t)]))]),assign(rodinpos(act4,internal_element1),[identifier(none,pfrom)],[set_subtraction(none,identifier(none,pfrom),set_extension(none,[couple(none,[identifier(none,p1),identifier(none,t)])]))])],[]),event(rodinpos('TransferFail',evt0),'TransferFail',['TransferFail'],[identifier(rodinpos([],internal_var3),a),identifier(rodinpos([],internal_var1),p1),identifier(rodinpos([],internal_var2),p2),identifier(rodinpos([],internal_var4),t)],[member(rodinpos(grd1,internal_grd6),identifier(none,t),identifier(none,pending)),member(rodinpos(grd2,internal_grd1),identifier(none,p1),identifier(none,purse)),member(rodinpos(grd3,internal_grd4),identifier(none,p2),identifier(none,purse)),not_equal(rodinpos(grd4,internal_grd2),identifier(none,p1),identifier(none,p2)),member(rodinpos(grd5,internal_grd5),identifier(none,a),natural_set(none)),greater_equal(rodinpos(grd6,internal_grd3),function(none,identifier(none,bal),[identifier(none,p1)]),identifier(none,a)),equal(rodinpos(grd7,element1),function(none,identifier(none,from),[identifier(none,t)]),identifier(none,p1)),equal(rodinpos(grd8,element2),function(none,identifier(none,to),[identifier(none,t)]),identifier(none,p2)),equal(rodinpos(grd9,element3),function(none,identifier(none,am),[identifier(none,t)]),identifier(none,a)),member(rodinpos(grd10,internal_grd7),couple(none,[identifier(none,p1),identifier(none,t)]),identifier(none,pfrom))],[assign(rodinpos(act3,internal_act3),[identifier(none,recover)],[union(none,identifier(none,recover),set_extension(none,[identifier(none,t)]))]),assign(rodinpos(act4,internal_act4),[identifier(none,pending)],[set_subtraction(none,identifier(none,pending),set_extension(none,[identifier(none,t)]))]),assign(rodinpos(act5,internal_element1),[identifier(none,pfrom)],[set_subtraction(none,identifier(none,pfrom),set_extension(none,[couple(none,[identifier(none,p1),identifier(none,t)])]))]),assign(rodinpos(act1,internal_element2),[identifier(none,lfrom)],[union(none,identifier(none,lfrom),set_extension(none,[couple(none,[identifier(none,p1),identifier(none,t)])]))])],[]),event(rodinpos('Recover',evt1),'Recover',['Recover'],[identifier(rodinpos([],internal_var3),a),identifier(rodinpos([],internal_var1),p1),identifier(rodinpos([],internal_var2),t)],[member(rodinpos(grd4,internal_grd4),identifier(none,t),identifier(none,recover)),member(rodinpos(grd1,internal_grd1),identifier(none,p1),identifier(none,purse)),member(rodinpos(grd2,internal_grd2),identifier(none,a),natural_set(none)),equal(rodinpos(grd5,internal_grd5),function(none,identifier(none,from),[identifier(none,t)]),identifier(none,p1)),member(rodinpos(grd6,internal_grd6),couple(none,[identifier(none,p1),identifier(none,t)]),identifier(none,lfrom)),equal(rodinpos(grd3,internal_grd3),identifier(none,a),function(none,identifier(none,am),[identifier(none,t)]))],[assign(rodinpos(act1,internal_act1),[identifier(none,bal)],[overwrite(none,identifier(none,bal),set_extension(none,[couple(none,[identifier(none,p1),add(none,function(none,identifier(none,bal),[identifier(none,p1)]),identifier(none,a))])]))]),assign(rodinpos(act3,internal_act3),[identifier(none,ended)],[union(none,identifier(none,ended),set_extension(none,[identifier(none,t)]))]),assign(rodinpos(act4,internal_act4),[identifier(none,recover)],[set_subtraction(none,identifier(none,recover),set_extension(none,[identifier(none,t)]))]),assign(rodinpos(act5,internal_element1),[identifier(none,lfrom)],[set_subtraction(none,identifier(none,lfrom),set_extension(none,[couple(none,[identifier(none,p1),identifier(none,t)])]))])],[]),event(rodinpos('CheckBal',evt2),'CheckBal',['CheckBal'],[identifier(rodinpos([],internal_var2),a),identifier(rodinpos([],internal_var1),p)],[member(rodinpos(grd1,internal_grd1),identifier(none,p),identifier(none,purse)),equal(rodinpos(grd2,internal_grd2),identifier(none,a),function(none,identifier(none,bal),[identifier(none,p)])),equal(rodinpos(grd3,internal_grd3),image(none,identifier(none,pfrom),set_extension(none,[identifier(none,p)])),empty_set(none))],[],[])])]),event_b_model(none,m1,[sees(none,[c1]),variables(none,[identifier(none,abal),identifier(none,lost)]),invariant(none,[member(rodinpos(inv1,internal_inv1),identifier(none,abal),total_function(none,identifier(none,purse),natural_set(none))),member(rodinpos(inv2,internal_inv2),identifier(none,lost),total_function(none,identifier(none,purse),natural_set(none)))]),theorems(none,[]),events(none,[event(rodinpos('INITIALISATION',internal_evt1),'INITIALISATION',[],[],[],[assign(rodinpos(act1,internal_act1),[identifier(none,abal)],[cartesian_product(none,identifier(none,purse),set_extension(none,[integer(none,0)]))]),assign(rodinpos(act2,internal_act2),[identifier(none,lost)],[cartesian_product(none,identifier(none,purse),set_extension(none,[integer(none,0)]))])],[]),event(rodinpos('TransferOk',internal_evt2),'TransferOk',[],[identifier(rodinpos([],internal_var3),a),identifier(rodinpos([],internal_var1),p1),identifier(rodinpos([],internal_var2),p2)],[member(rodinpos(grd1,internal_grd1),identifier(none,p1),identifier(none,purse)),member(rodinpos(grd4,internal_grd4),identifier(none,p2),identifier(none,purse)),not_equal(rodinpos(grd2,internal_grd2),identifier(none,p1),identifier(none,p2)),member(rodinpos(grd5,internal_grd5),identifier(none,a),natural_set(none)),greater_equal(rodinpos(grd3,internal_grd3),function(none,identifier(none,abal),[identifier(none,p1)]),identifier(none,a))],[assign(rodinpos(act1,internal_act1),[identifier(none,abal)],[overwrite(none,overwrite(none,identifier(none,abal),set_extension(none,[couple(none,[identifier(none,p1),minus(none,function(none,identifier(none,abal),[identifier(none,p1)]),identifier(none,a))])])),set_extension(none,[couple(none,[identifier(none,p2),add(none,function(none,identifier(none,abal),[identifier(none,p2)]),identifier(none,a))])]))])],[]),event(rodinpos('TransferFail',evt0),'TransferFail',[],[identifier(rodinpos([],internal_var3),a),identifier(rodinpos([],internal_var1),p1),identifier(rodinpos([],internal_var2),p2)],[member(rodinpos(grd1,internal_grd1),identifier(none,p1),identifier(none,purse)),member(rodinpos(grd4,internal_grd4),identifier(none,p2),identifier(none,purse)),not_equal(rodinpos(grd2,internal_grd2),identifier(none,p1),identifier(none,p2)),member(rodinpos(grd5,internal_grd5),identifier(none,a),natural_set(none)),greater_equal(rodinpos(grd3,internal_grd3),function(none,identifier(none,abal),[identifier(none,p1)]),identifier(none,a))],[assign(rodinpos(act1,internal_act1),[identifier(none,abal)],[overwrite(none,identifier(none,abal),set_extension(none,[couple(none,[identifier(none,p1),minus(none,function(none,identifier(none,abal),[identifier(none,p1)]),identifier(none,a))])]))]),assign(rodinpos(act2,internal_act2),[identifier(none,lost)],[overwrite(none,identifier(none,lost),set_extension(none,[couple(none,[identifier(none,p1),add(none,function(none,identifier(none,lost),[identifier(none,p1)]),identifier(none,a))])]))])],[]),event(rodinpos('Recover',evt1),'Recover',[],[identifier(rodinpos([],internal_var3),a),identifier(rodinpos([],internal_var1),p1)],[member(rodinpos(grd1,internal_grd1),identifier(none,p1),identifier(none,purse)),member(rodinpos(grd2,internal_grd2),identifier(none,a),natural_set(none)),greater_equal(rodinpos(grd3,internal_grd3),function(none,identifier(none,lost),[identifier(none,p1)]),identifier(none,a))],[assign(rodinpos(act2,internal_act2),[identifier(none,lost)],[overwrite(none,identifier(none,lost),set_extension(none,[couple(none,[identifier(none,p1),minus(none,function(none,identifier(none,lost),[identifier(none,p1)]),identifier(none,a))])]))]),assign(rodinpos(act1,internal_act1),[identifier(none,abal)],[overwrite(none,identifier(none,abal),set_extension(none,[couple(none,[identifier(none,p1),add(none,function(none,identifier(none,abal),[identifier(none,p1)]),identifier(none,a))])]))])],[]),event(rodinpos('CheckBal',internal_evt3),'CheckBal',[],[identifier(rodinpos([],internal_var2),a),identifier(rodinpos([],internal_var1),p)],[member(rodinpos(grd1,internal_grd1),identifier(none,p),identifier(none,purse)),equal(rodinpos(grd2,internal_grd2),identifier(none,a),function(none,identifier(none,abal),[identifier(none,p)]))],[],[])])])],[event_b_context(none,c1,[extends(none,[]),constants(none,[identifier(none,purse)]),axioms(none,[subset(rodinpos(axm1,internal_axm1),identifier(none,purse),identifier(none,'PURSE'))]),theorems(none,[]),sets(none,[deferred_set(none,'PURSE')])]),event_b_context(none,c2,[extends(none,[c1]),constants(none,[identifier(none,am),identifier(none,from),identifier(none,sum),identifier(none,to)]),axioms(none,[member(rodinpos(axm1,internal_axm1),identifier(none,from),total_function(none,identifier(none,'TRANS'),identifier(none,'PURSE'))),member(rodinpos(axm2,internal_axm2),identifier(none,to),total_function(none,identifier(none,'TRANS'),identifier(none,'PURSE'))),member(rodinpos(axm3,internal_axm3),identifier(none,am),total_function(none,identifier(none,'TRANS'),natural_set(none))),member(rodinpos(axm4,internal_axm4),identifier(none,sum),partial_function(none,pow_subset(none,identifier(none,'TRANS')),natural_set(none))),forall(rodinpos(axm5,internal_axm5),[identifier(none,s)],implication(none,conjunct(none,subset(none,identifier(none,s),identifier(none,'TRANS')),finite(none,identifier(none,s))),member(none,identifier(none,s),domain(none,identifier(none,sum))))),forall(rodinpos(axm6,internal_element1),[identifier(none,s),identifier(none,t)],implication(none,conjunct(none,subset(none,identifier(none,s),identifier(none,'TRANS')),conjunct(none,finite(none,identifier(none,s)),not_member(none,identifier(none,t),identifier(none,s)))),equal(none,function(none,identifier(none,sum),[union(none,identifier(none,s),set_extension(none,[identifier(none,t)]))]),add(none,function(none,identifier(none,sum),[identifier(none,s)]),function(none,identifier(none,am),[identifier(none,t)]))))),forall(rodinpos(axm7,internal_element2),[identifier(none,s),identifier(none,t)],implication(none,conjunct(none,subset(none,identifier(none,s),identifier(none,'TRANS')),conjunct(none,finite(none,identifier(none,s)),member(none,identifier(none,t),identifier(none,s)))),equal(none,function(none,identifier(none,sum),[set_subtraction(none,identifier(none,s),set_extension(none,[identifier(none,t)]))]),minus(none,function(none,identifier(none,sum),[identifier(none,s)]),function(none,identifier(none,am),[identifier(none,t)]))))),member(rodinpos(axm9,internal_element4),empty_set(none),domain(none,identifier(none,sum))),equal(rodinpos(axm8,internal_element3),function(none,identifier(none,sum),[empty_set(none)]),integer(none,0)),forall(rodinpos(axm10,internal_element5),[identifier(none,s),identifier(none,t)],implication(none,conjunct(none,subset(none,identifier(none,s),identifier(none,'TRANS')),conjunct(none,finite(none,identifier(none,s)),member(none,identifier(none,t),identifier(none,s)))),greater_equal(none,function(none,identifier(none,sum),[identifier(none,s)]),function(none,identifier(none,am),[identifier(none,t)]))))]),theorems(none,[]),sets(none,[deferred_set(none,'TRANS')])])],[discharged(m2,'INITIALISATION',inv2),discharged(m2,'INITIALISATION',inv3),discharged(m2,'INITIALISATION',inv4),discharged(m2,'INITIALISATION',inv5),discharged(m2,'INITIALISATION',inv7),discharged(m2,'INITIALISATION',inv9),discharged(m2,'INITIALISATION',inv10),discharged(m2,'INITIALISATION',inv11),discharged(m2,'INITIALISATION',inv12),discharged(m2,'INITIALISATION',inv13),discharged(m2,'INITIALISATION',inv8),discharged(m2,'INITIALISATION',inv14),discharged(m2,'INITIALISATION',inv15),discharged(m2,'INITIALISATION',inv19),discharged(m2,'INITIALISATION',inv16),discharged(m2,'INITIALISATION',inv17),discharged(m2,'INITIALISATION',inv18),discharged(m2,'INITIALISATION',inv20),discharged(m2,'Start',inv2),discharged(m2,'Start',inv3),discharged(m2,'Start',inv4),discharged(m2,'Start',inv5),discharged(m2,'Start',inv7),discharged(m2,'Start',inv10),discharged(m2,'Start',inv20),discharged(m2,'Deduct',inv2),discharged(m2,'Deduct',inv3),discharged(m2,'Deduct',inv9),discharged(m2,'Deduct',inv10),discharged(m2,'Deduct',inv11),discharged(m2,'Deduct',inv12),discharged(m2,'Deduct',inv18),discharged(m2,'Deduct',inv20),discharged(m2,'Increase',inv3),discharged(m2,'Increase',inv5),discharged(m2,'Increase',inv10),discharged(m2,'Increase',inv11),discharged(m2,'Increase',inv8),discharged(m2,'Increase',inv18),discharged(m2,'TransferFail',inv3),discharged(m2,'TransferFail',inv4),discharged(m2,'TransferFail',inv10),discharged(m2,'TransferFail',inv11),discharged(m2,'TransferFail',inv8),discharged(m2,'TransferFail',inv14),discharged(m2,'TransferFail',inv15),discharged(m2,'TransferFail',inv19),discharged(m2,'TransferFail',inv18),discharged(m2,'TransferFail',inv20),discharged(m2,'Recover',inv4),discharged(m2,'Recover',inv5),discharged(m2,'Recover',inv14),discharged(m2,'Recover',inv16),discharged(m2,'Recover',inv18),discharged(m2,'Recover',inv20)],Error)).

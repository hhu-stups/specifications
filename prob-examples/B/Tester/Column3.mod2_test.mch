/*"      **C** Machine Column3 represents a display-column a TV screen.     A sequence of pages is defined by the 'Define' operation which      will be displayed over the locations of the display column.      They may be scrolled by the operations 'Up' and 'Down'.      The cursor can remain over any location in the display column.     This location will be displayed with {\em sel_colour}, the other locations     will be displayed with {\em norm_colour}. Under special circumstances     a location can display a blank page, and then such a location will     be displayed with white colour.  "*/MACHINE Column3SETS        COLOURS = {red,green,blue,white,lightgrey};        STATUS  = {DEFINED,UNDEFINED};        PAGENAMES = {p0,p1,p2,p3,p4,p5}/* ------ CONSTANTS 	sel_colour,    norm_colour, 	display_size,    PAGENR,     blank,     titles  PROPERTIES        sel_colour : COLOURS & sel_colour = lightgrey &        norm_colour: COLOURS & norm_colour = red      &        display_size   : NAT1 & display_size >= 3 &        PAGENR     =  1..100 &        blank      : PAGENAMES   &        titles     : PAGENR --> PAGENAMES ---- commented out by mal */        /*" ***C*** Each page has a page number and a page name. "*/        VARIABLES	Plist,             /*"**C** Actual list of pages in this column      "*/	DisColours,    /*"**C**Colour of locations from 1st position onwards in column."*/	DisPnames,     /*"**C**Page names from 1st position onwards in display column. "*/        	Scroll,	Selected,       /*" **C**serial no. of selected page in transmitted sequence "*/        Status,                        titles /* added by mal */        DEFINITIONS /* added by mal */    PAGENR == 1..10;	sel_colour == lightgrey;    norm_colour == red; 	/* display_size == 3; */ 	blank == p0 	INVARIANT    display_size    : NAT1 &    Status          : STATUS       &	Plist		    : iseq(PAGENR)  &	Selected	    : NAT1 &	DisPnames       :  seq (PAGENAMES) &	DisColours      : seq (COLOURS) &        Scroll      : NAT &        Scroll < Selected &        titles     : PAGENR --> PAGENAMES /* added by mal */ &        (  (Status = UNDEFINED)  =>                 (  Plist = <> &                    DisPnames = <> &                    DisColours = <> ) )  &                ((Status = DEFINED)    =>                (  Plist /= <> &                   size(DisColours) = display_size &                   size(DisPnames)  = display_size &                   Selected <= size(Plist)         &                  ((size(Plist) < display_size)  => Scroll = 0) &                  ((size(Plist) >= display_size)   =>                         Scroll <= size(Plist)-display_size+1) ) )/* **C** insert here the constraints on the sequence in DisPnames that it is a subsequence    of Plist */                  /*"***C***    Each location of the display column has a colour and it displays   a page name. The sequence of page names will be stored in the sequence     DisPnames and the colours will be stored in the sequence DisColours. Location i of the    display column has colour DisColiur(i) and it displays the pagename DisPnames(i). "*//*"**C**Scroll rcorresponds to how many positions down the Plist, pages are displayed in column.\\    -- if Plist = [P7,P3,P4,P5,P6], and display size is 4, then \\          Scroll = 0 $=>$ display shows [P7,P3,P4,P5]\\          Scroll = 1 $=>$ display shows [P3,P4,P5,P6]          and so on.  "*/INITIALISATION    display_size := 3 ||    Status   := UNDEFINED ||	Selected := 1 ||     	Scroll := 0 ||       	Plist,DisColours,DisPnames := <>,<>,<> || 	titles := { 1 |-> p1, 2 |-> p2, 3 |-> p3, 4 |-> p4, 5 |-> p5}  /* added by mal *//*" **C**Selected set to the very first page in the tranmission sequence. Scroll=0 means  the very first page of the page sequence (if defined) is at position 1 in the display column "*/OPERATIONS       /* ------------------- */          Define_mal2 =           PRE              Status = UNDEFINED           THEN              Status := DEFINED  ||	          Plist := [1,2,3,5] ||	          Selected := 1 ||	          Scroll := 0  ||	          DisPnames := [p1,p2,p3,p5] ||	          DisColours := [lightgrey,red,red,red]           END;                            Test4 =        PRE            Status = DEFINED        THEN            DisPnames := {nn,tt | nn : (1..display_size)  &                                  tt :  PAGENAMES &                                              (tt=titles(Plist(Scroll+1+nn))) }        END;                        cc <-- Test5 =        PRE            Status = DEFINED        THEN            cc := {nn | nn:NAT1 & nn : (1..display_size) }        END;                        cc <-- Test6 =        PRE            Status = DEFINED        THEN            cc := {tt | tt : PAGENAMES }        ENDEND  /* End of Machine declaration */
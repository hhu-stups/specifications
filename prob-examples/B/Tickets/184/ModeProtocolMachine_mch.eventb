package(load_event_b_project([
event_b_model(none,'ModeProtocolMachine',[sees(none,['ModeProtocolContext']),variables(none,[identifier(none,currentMode),identifier(none,incoming),identifier(none,lossy),identifier(none,observation),identifier(none,outgoing),identifier(none,stage),identifier(none,suggestedMode),identifier(none,suggestionLevel)]),invariant(none,[member(rodinpos('ModeProtocolMachine',inv_decl_currentMode,'-'),identifier(none,currentMode),total_function(none,identifier(none,'MANAGERS'),total_function(none,identifier(none,'MANAGERS'),identifier(none,'MODES')))),member(rodinpos('ModeProtocolMachine',inv_decl_incoming,'2'),identifier(none,incoming),total_function(none,identifier(none,'MANAGERS'),partial_function(none,identifier(none,'MANAGERS'),identifier(none,'MESSAGES')))),forall(rodinpos('ModeProtocolMachine',inv_ext_incoming,'3'),[identifier(none,mn)],implication(none,member(none,identifier(none,mn),identifier(none,'MANAGERS')),negation(none,member(none,identifier(none,mn),domain(none,function(none,identifier(none,incoming),[identifier(none,mn)])))))),member(rodinpos('ModeProtocolMachine',inv_decl_lossy,'A'),identifier(none,lossy),bool_set(none)),member(rodinpos('ModeProtocolMachine',inv_decl_observation,'.'),identifier(none,observation),total_function(none,identifier(none,'MANAGERS'),total_function(none,identifier(none,'MANAGERS'),identifier(none,'OBSERVATIONS')))),member(rodinpos('ModeProtocolMachine',inv_decl_stage,'9'),identifier(none,stage),total_function(none,identifier(none,'MANAGERS'),identifier(none,'STAGES'))),member(rodinpos('ModeProtocolMachine',inv_decl_suggestedMode,'0'),identifier(none,suggestedMode),total_function(none,identifier(none,'MANAGERS'),total_function(none,identifier(none,'MANAGERS'),identifier(none,'MODES')))),member(rodinpos('ModeProtocolMachine',inv_decl_suggestionLevel,'/'),identifier(none,suggestionLevel),total_function(none,identifier(none,'MANAGERS'),total_function(none,identifier(none,'MANAGERS'),identifier(none,'SUGGESTIONLEVELS')))),member(rodinpos('ModeProtocolMachine',inv_decl_outgoing,';'),identifier(none,outgoing),total_function(none,identifier(none,'MANAGERS'),partial_function(none,identifier(none,'MANAGERS'),identifier(none,'MESSAGES')))),forall(rodinpos('ModeProtocolMachine',inv_no_outgoing,'='),[identifier(none,mn)],implication(none,negation(none,equal(none,function(none,identifier(none,stage),[identifier(none,mn)]),identifier(none,'StgNotRunning'))),equal(none,function(none,identifier(none,outgoing),[identifier(none,mn)]),empty_set(none)))),forall(rodinpos('ModeProtocolMachine',inv_ext_outgoing,'>'),[identifier(none,mn)],implication(none,member(none,identifier(none,mn),identifier(none,'MANAGERS')),negation(none,member(none,identifier(none,mn),domain(none,function(none,identifier(none,outgoing),[identifier(none,mn)])))))),forall(rodinpos('ModeProtocolMachine',inv_eq_outgoing,'C'),[identifier(none,mn)],implication(none,truth(none),forall(none,[identifier(none,i)],implication(none,truth(none),forall(none,[identifier(none,k)],implication(none,conjunct(none,member(none,identifier(none,mn),identifier(none,'MANAGERS')),conjunct(none,member(none,identifier(none,i),domain(none,function(none,identifier(none,outgoing),[identifier(none,mn)]))),member(none,identifier(none,k),domain(none,function(none,identifier(none,outgoing),[identifier(none,mn)]))))),equal(none,function(none,function(none,identifier(none,outgoing),[identifier(none,mn)]),[identifier(none,i)]),function(none,function(none,identifier(none,outgoing),[identifier(none,mn)]),[identifier(none,k)])))))))),forall(rodinpos('ModeProtocolMachine',inv_msg_outgoing,'D'),[identifier(none,mn)],implication(none,truth(none),forall(none,[identifier(none,msg)],implication(none,conjunct(none,member(none,identifier(none,mn),identifier(none,'MANAGERS')),member(none,identifier(none,msg),range(none,function(none,identifier(none,outgoing),[identifier(none,mn)])))),conjunct(none,equal(none,function(none,identifier(none,'MsgCurrentMode'),[identifier(none,msg)]),function(none,function(none,identifier(none,currentMode),[identifier(none,mn)]),[identifier(none,mn)])),conjunct(none,equal(none,function(none,identifier(none,'MsgObservation'),[identifier(none,msg)]),function(none,function(none,identifier(none,observation),[identifier(none,mn)]),[identifier(none,mn)])),conjunct(none,equal(none,function(none,identifier(none,'MsgSuggestedMode'),[identifier(none,msg)]),function(none,function(none,identifier(none,suggestedMode),[identifier(none,mn)]),[identifier(none,mn)])),equal(none,function(none,identifier(none,'MsgSuggestionLevel'),[identifier(none,msg)]),function(none,function(none,identifier(none,suggestionLevel),[identifier(none,mn)]),[identifier(none,mn)])))))))))]),theorems(none,[]),events(none,[event(rodinpos('ModeProtocolMachine','INITIALISATION','\''),'INITIALISATION',ordinary(none),[],[],[],[],[assign(rodinpos('ModeProtocolMachine',act_currentMode,'\''),[identifier(none,currentMode)],[cartesian_product(none,identifier(none,'MANAGERS'),set_extension(none,[cartesian_product(none,identifier(none,'MANAGERS'),set_extension(none,[identifier(none,'MdOff')]))]))]),assign(rodinpos('ModeProtocolMachine',act_incoming,'*'),[identifier(none,incoming)],[cartesian_product(none,identifier(none,'MANAGERS'),set_extension(none,[empty_set(none)]))]),becomes_element_of(rodinpos('ModeProtocolMachine',act_lossy,'/'),[identifier(none,lossy)],bool_set(none)),becomes_element_of(rodinpos('ModeProtocolMachine',act_observation,'('),[identifier(none,observation)],total_function(none,identifier(none,'MANAGERS'),total_function(none,identifier(none,'MANAGERS'),identifier(none,'OBSERVATIONS')))),assign(rodinpos('ModeProtocolMachine',act_outgoing,'.'),[identifier(none,outgoing)],[cartesian_product(none,identifier(none,'MANAGERS'),set_extension(none,[empty_set(none)]))]),assign(rodinpos('ModeProtocolMachine',act_stage,','),[identifier(none,stage)],[cartesian_product(none,identifier(none,'MANAGERS'),set_extension(none,[identifier(none,'StgNotRunning')]))]),assign(rodinpos('ModeProtocolMachine',act_suggestedMode,'+'),[identifier(none,suggestedMode)],[cartesian_product(none,identifier(none,'MANAGERS'),set_extension(none,[cartesian_product(none,identifier(none,'MANAGERS'),set_extension(none,[identifier(none,'MdOff')]))]))]),assign(rodinpos('ModeProtocolMachine',act_suggestionLevel,')'),[identifier(none,suggestionLevel)],[cartesian_product(none,identifier(none,'MANAGERS'),set_extension(none,[cartesian_product(none,identifier(none,'MANAGERS'),set_extension(none,[integer(none,0)]))]))])],[]),event(rodinpos('ModeProtocolMachine',evt_StartManagerExecution,'6'),evt_StartManagerExecution,ordinary(none),[],[identifier(rodinpos('ModeProtocolMachine',[],'\''),mn)],[member(rodinpos('ModeProtocolMachine',grd_decl_mn,'('),identifier(none,mn),identifier(none,'MANAGERS')),equal(rodinpos('ModeProtocolMachine',grd_stage,'1'),function(none,identifier(none,stage),[identifier(none,mn)]),identifier(none,'StgNotRunning')),equal(rodinpos('ModeProtocolMachine',grd_outgoing,'0'),function(none,identifier(none,outgoing),[identifier(none,mn)]),empty_set(none))],[],[assign(rodinpos('ModeProtocolMachine',act_currentMode,','),[identifier(none,currentMode)],[overwrite(none,identifier(none,currentMode),set_extension(none,[couple(none,[identifier(none,mn),overwrite(none,function(none,identifier(none,currentMode),[identifier(none,mn)]),event_b_comprehension_set(none,[identifier(none,i),identifier(none,cm)],couple(none,[identifier(none,i),identifier(none,cm)]),conjunct(none,member(none,identifier(none,i),domain(none,function(none,identifier(none,incoming),[identifier(none,mn)]))),equal(none,identifier(none,cm),function(none,identifier(none,'MsgCurrentMode'),[function(none,function(none,identifier(none,incoming),[identifier(none,mn)]),[identifier(none,i)])])))))])]))]),assign(rodinpos('ModeProtocolMachine',act_observation,'-'),[identifier(none,observation)],[overwrite(none,identifier(none,observation),set_extension(none,[couple(none,[identifier(none,mn),overwrite(none,function(none,identifier(none,observation),[identifier(none,mn)]),event_b_comprehension_set(none,[identifier(none,i),identifier(none,ob)],couple(none,[identifier(none,i),identifier(none,ob)]),conjunct(none,member(none,identifier(none,i),domain(none,function(none,identifier(none,incoming),[identifier(none,mn)]))),equal(none,identifier(none,ob),function(none,identifier(none,'MsgObservation'),[function(none,function(none,identifier(none,incoming),[identifier(none,mn)]),[identifier(none,i)])])))))])]))]),assign(rodinpos('ModeProtocolMachine',act_suggestedMode,'.'),[identifier(none,suggestedMode)],[overwrite(none,identifier(none,suggestedMode),set_extension(none,[couple(none,[identifier(none,mn),overwrite(none,function(none,identifier(none,suggestedMode),[identifier(none,mn)]),event_b_comprehension_set(none,[identifier(none,i),identifier(none,sm)],couple(none,[identifier(none,i),identifier(none,sm)]),conjunct(none,member(none,identifier(none,i),domain(none,function(none,identifier(none,incoming),[identifier(none,mn)]))),equal(none,identifier(none,sm),function(none,identifier(none,'MsgSuggestedMode'),[function(none,function(none,identifier(none,incoming),[identifier(none,mn)]),[identifier(none,i)])])))))])]))]),assign(rodinpos('ModeProtocolMachine',act_suggestionLevel,'/'),[identifier(none,suggestionLevel)],[overwrite(none,identifier(none,suggestionLevel),set_extension(none,[couple(none,[identifier(none,mn),overwrite(none,function(none,identifier(none,suggestionLevel),[identifier(none,mn)]),event_b_comprehension_set(none,[identifier(none,i),identifier(none,sl)],couple(none,[identifier(none,i),identifier(none,sl)]),conjunct(none,member(none,identifier(none,i),domain(none,function(none,identifier(none,incoming),[identifier(none,mn)]))),equal(none,identifier(none,sl),function(none,identifier(none,'MsgSuggestionLevel'),[function(none,function(none,identifier(none,incoming),[identifier(none,mn)]),[identifier(none,i)])])))))])]))]),assign(rodinpos('ModeProtocolMachine',act_incoming,'+'),[identifier(none,incoming)],[overwrite(none,identifier(none,incoming),set_extension(none,[couple(none,[identifier(none,mn),empty_set(none)])]))]),assign(rodinpos('ModeProtocolMachine',act_stage,')'),[identifier(none,stage)],[overwrite(none,identifier(none,stage),set_extension(none,[couple(none,[identifier(none,mn),identifier(none,'StgReobserving')])]))])],[]),event(rodinpos('ModeProtocolMachine',evt_EndReobservation,'R'),evt_EndReobservation,ordinary(none),[],[identifier(rodinpos('ModeProtocolMachine',[],'\''),mn),identifier(rodinpos('ModeProtocolMachine',[],','),newLocalObs)],[member(rodinpos('ModeProtocolMachine',grd_mn,'('),identifier(none,mn),identifier(none,'MANAGERS')),equal(rodinpos('ModeProtocolMachine',grd_stage,')'),function(none,identifier(none,stage),[identifier(none,mn)]),identifier(none,'StgReobserving')),member(rodinpos('ModeProtocolMachine',grd_decl_newLocalObs,'-'),identifier(none,newLocalObs),identifier(none,'OBSERVATIONS'))],[],[assign(rodinpos('ModeProtocolMachine',act_observation,'+'),[identifier(none,observation)],[overwrite(none,identifier(none,observation),set_extension(none,[couple(none,[identifier(none,mn),overwrite(none,function(none,identifier(none,observation),[identifier(none,mn)]),set_extension(none,[couple(none,[identifier(none,mn),identifier(none,newLocalObs)])]))])]))]),assign(rodinpos('ModeProtocolMachine',act_stage,'*'),[identifier(none,stage)],[overwrite(none,identifier(none,stage),set_extension(none,[couple(none,[identifier(none,mn),identifier(none,'StgReconsidering')])]))])],[]),event(rodinpos('ModeProtocolMachine',evt_EndReconsideration,'P'),evt_EndReconsideration,ordinary(none),[],[identifier(rodinpos('ModeProtocolMachine',[],'>'),currMode),identifier(rodinpos('ModeProtocolMachine',[],'?'),currSuggLevel),identifier(rodinpos('ModeProtocolMachine',[],'B'),currSuggMode),identifier(rodinpos('ModeProtocolMachine',[],'\''),mn),identifier(rodinpos('ModeProtocolMachine',[],'+'),nextStage),identifier(rodinpos('ModeProtocolMachine',[],'.'),nextSuggLevel),identifier(rodinpos('ModeProtocolMachine',[],'-'),nextSuggMode),identifier(rodinpos('ModeProtocolMachine',[],';'),prefMode)],[member(rodinpos('ModeProtocolMachine',grd_mn,'('),identifier(none,mn),identifier(none,'MANAGERS')),equal(rodinpos('ModeProtocolMachine',grd_stage,')'),function(none,identifier(none,stage),[identifier(none,mn)]),identifier(none,'StgReconsidering')),equal(rodinpos('ModeProtocolMachine',grd_decl_currMode,'@'),identifier(none,currMode),function(none,function(none,identifier(none,currentMode),[identifier(none,mn)]),[identifier(none,mn)])),equal(rodinpos('ModeProtocolMachine',grd_decl_currSuggLevel,'A'),identifier(none,currSuggLevel),function(none,function(none,identifier(none,suggestionLevel),[identifier(none,mn)]),[identifier(none,mn)])),equal(rodinpos('ModeProtocolMachine',grd_decl_currSuggMode,'C'),identifier(none,currSuggMode),function(none,function(none,identifier(none,suggestedMode),[identifier(none,mn)]),[identifier(none,mn)])),equal(rodinpos('ModeProtocolMachine',grd_decl_prefMode,'='),identifier(none,prefMode),function(none,identifier(none,'PreferableMode'),[couple(none,[identifier(none,currMode),function(none,identifier(none,observation),[identifier(none,mn)])])])),member(rodinpos('ModeProtocolMachine',grd_decl_nextState,'6'),identifier(none,nextStage),set_extension(none,[identifier(none,'StgChanging'),identifier(none,'StgPostprocessing')])),member(rodinpos('ModeProtocolMachine',grd_decl_nextSuggMode,'/'),identifier(none,nextSuggMode),set_extension(none,[identifier(none,prefMode),identifier(none,currSuggMode)])),member(rodinpos('ModeProtocolMachine',grd_decl_nextSuggLevel,'0'),identifier(none,nextSuggLevel),identifier(none,'SUGGESTIONLEVELS')),equivalence(rodinpos('ModeProtocolMachine',grd_which_nextStage,'5'),equal(none,identifier(none,nextStage),identifier(none,'StgChanging')),conjunct(none,equal(none,identifier(none,currSuggLevel),integer(none,2)),equal(none,identifier(none,nextSuggLevel),integer(none,3)))),equivalence(rodinpos('ModeProtocolMachine',grd_which_nextSuggMode,'G'),equal(none,identifier(none,nextSuggMode),identifier(none,prefMode)),disjunct(none,equal(none,identifier(none,prefMode),identifier(none,currSuggMode)),conjunct(none,equal(none,identifier(none,nextSuggLevel),integer(none,1)),negation(none,equal(none,identifier(none,prefMode),identifier(none,currMode)))))),equivalence(rodinpos('ModeProtocolMachine',grd_whenLevel1,'4'),equal(none,identifier(none,nextSuggLevel),integer(none,1)),conjunct(none,disjunct(none,equal(none,identifier(none,currSuggLevel),integer(none,1)),negation(none,equal(none,identifier(none,prefMode),identifier(none,currMode)))),conjunct(none,forall(none,[identifier(none,k)],implication(none,member(none,identifier(none,k),identifier(none,'MANAGERS')),conjunct(none,equal(none,function(none,function(none,identifier(none,currentMode),[identifier(none,mn)]),[identifier(none,k)]),identifier(none,currMode)),member(none,function(none,function(none,identifier(none,suggestionLevel),[identifier(none,mn)]),[identifier(none,k)]),set_extension(none,[integer(none,0),integer(none,1)]))))),disjunct(none,negation(none,equal(none,identifier(none,mn),identifier(none,'MnAOC'))),exists(none,[identifier(none,i)],conjunct(none,member(none,identifier(none,i),identifier(none,'MANAGERS')),disjunct(none,equal(none,function(none,function(none,identifier(none,suggestionLevel),[identifier(none,mn)]),[identifier(none,i)]),integer(none,0)),negation(none,equal(none,function(none,function(none,identifier(none,suggestedMode),[identifier(none,mn)]),[identifier(none,i)]),identifier(none,currSuggMode)))))))))),equivalence(rodinpos('ModeProtocolMachine',grd_whenLevel2,'D'),equal(none,identifier(none,nextSuggLevel),integer(none,2)),conjunct(none,exists(none,[identifier(none,i)],conjunct(none,member(none,identifier(none,i),identifier(none,'MANAGERS')),equal(none,function(none,function(none,identifier(none,suggestionLevel),[identifier(none,mn)]),[identifier(none,i)]),integer(none,1)))),disjunct(none,conjunct(none,equal(none,identifier(none,mn),identifier(none,'MnAOC')),forall(none,[identifier(none,k)],implication(none,member(none,identifier(none,k),identifier(none,'MANAGERS')),conjunct(none,member(none,function(none,function(none,identifier(none,suggestionLevel),[identifier(none,mn)]),[identifier(none,k)]),set_extension(none,[integer(none,1),integer(none,2)])),equal(none,function(none,function(none,identifier(none,suggestedMode),[identifier(none,mn)]),[identifier(none,k)]),identifier(none,currSuggMode)))))),conjunct(none,negation(none,equal(none,identifier(none,mn),identifier(none,'MnAOC'))),equal(none,function(none,function(none,identifier(none,suggestionLevel),[identifier(none,mn)]),[identifier(none,'MnAOC')]),integer(none,2)))))),equivalence(rodinpos('ModeProtocolMachine',grd_whenLevel3,'E'),equal(none,identifier(none,nextSuggLevel),integer(none,3)),conjunct(none,exists(none,[identifier(none,i)],conjunct(none,member(none,identifier(none,i),identifier(none,'MANAGERS')),equal(none,function(none,function(none,identifier(none,suggestionLevel),[identifier(none,mn)]),[identifier(none,i)]),integer(none,2)))),forall(none,[identifier(none,k)],implication(none,member(none,identifier(none,k),identifier(none,'MANAGERS')),member(none,function(none,function(none,identifier(none,suggestionLevel),[identifier(none,mn)]),[identifier(none,k)]),set_extension(none,[integer(none,2),integer(none,3)]))))))],[],[assign(rodinpos('ModeProtocolMachine',act_suggestedMode,'1'),[identifier(none,suggestedMode)],[overwrite(none,identifier(none,suggestedMode),set_extension(none,[couple(none,[identifier(none,mn),overwrite(none,function(none,identifier(none,suggestedMode),[identifier(none,mn)]),set_extension(none,[couple(none,[identifier(none,mn),identifier(none,nextSuggMode)])]))])]))]),assign(rodinpos('ModeProtocolMachine',act_suggestionLevel,'2'),[identifier(none,suggestionLevel)],[overwrite(none,identifier(none,suggestionLevel),set_extension(none,[couple(none,[identifier(none,mn),overwrite(none,function(none,identifier(none,suggestionLevel),[identifier(none,mn)]),set_extension(none,[couple(none,[identifier(none,mn),identifier(none,nextSuggLevel)])]))])]))]),assign(rodinpos('ModeProtocolMachine',act_stage,'*'),[identifier(none,stage)],[overwrite(none,identifier(none,stage),set_extension(none,[couple(none,[identifier(none,mn),identifier(none,nextStage)])]))])],[]),event(rodinpos('ModeProtocolMachine',evt_EndChange,'O'),evt_EndChange,ordinary(none),[],[identifier(rodinpos('ModeProtocolMachine',[],'\''),mn)],[member(rodinpos('ModeProtocolMachine',grd_mn,'('),identifier(none,mn),identifier(none,'MANAGERS')),equal(rodinpos('ModeProtocolMachine',grd_stage,')'),function(none,identifier(none,stage),[identifier(none,mn)]),identifier(none,'StgChanging'))],[],[assign(rodinpos('ModeProtocolMachine',act_currentMode,'+'),[identifier(none,currentMode)],[overwrite(none,identifier(none,currentMode),set_extension(none,[couple(none,[identifier(none,mn),overwrite(none,function(none,identifier(none,currentMode),[identifier(none,mn)]),set_extension(none,[couple(none,[identifier(none,mn),function(none,function(none,identifier(none,suggestedMode),[identifier(none,mn)]),[identifier(none,mn)])])]))])]))]),assign(rodinpos('ModeProtocolMachine',act_stage,'*'),[identifier(none,stage)],[overwrite(none,identifier(none,stage),set_extension(none,[couple(none,[identifier(none,mn),identifier(none,'StgPostprocessing')])]))])],[]),event(rodinpos('ModeProtocolMachine',evt_PostprocessEnd,'N'),evt_PostprocessEnd,ordinary(none),[],[identifier(rodinpos('ModeProtocolMachine',[],'\''),mn)],[member(rodinpos('ModeProtocolMachine',grd_decl_mn,'('),identifier(none,mn),identifier(none,'MANAGERS')),equal(rodinpos('ModeProtocolMachine',grd_stage,')'),function(none,identifier(none,stage),[identifier(none,mn)]),identifier(none,'StgPostprocessing'))],[],[assign(rodinpos('ModeProtocolMachine',act_stage,'*'),[identifier(none,stage)],[overwrite(none,identifier(none,stage),set_extension(none,[couple(none,[identifier(none,mn),identifier(none,'StgStoppable')])]))])],[]),event(rodinpos('ModeProtocolMachine',evt_StopManagerExecution,'7'),evt_StopManagerExecution,ordinary(none),[],[identifier(rodinpos('ModeProtocolMachine',[],'\''),mn),identifier(rodinpos('ModeProtocolMachine',[],','),msg)],[member(rodinpos('ModeProtocolMachine',grd_decl_mn,'('),identifier(none,mn),identifier(none,'MANAGERS')),equal(rodinpos('ModeProtocolMachine',grd_stage,'5'),function(none,identifier(none,stage),[identifier(none,mn)]),identifier(none,'StgStoppable')),member(rodinpos('ModeProtocolMachine',grd_decl_msg,'-'),identifier(none,msg),identifier(none,'MESSAGES')),equal(rodinpos('ModeProtocolMachine',grd_MsgCurrentMode,'.'),function(none,identifier(none,'MsgCurrentMode'),[identifier(none,msg)]),function(none,function(none,identifier(none,currentMode),[identifier(none,mn)]),[identifier(none,mn)])),equal(rodinpos('ModeProtocolMachine',grd_MsgObservation,'/'),function(none,identifier(none,'MsgObservation'),[identifier(none,msg)]),function(none,function(none,identifier(none,observation),[identifier(none,mn)]),[identifier(none,mn)])),equal(rodinpos('ModeProtocolMachine',grd_MsgSuggestedMode,'0'),function(none,identifier(none,'MsgSuggestedMode'),[identifier(none,msg)]),function(none,function(none,identifier(none,suggestedMode),[identifier(none,mn)]),[identifier(none,mn)])),equal(rodinpos('ModeProtocolMachine',grd_MsgSuggestionLevel,'1'),function(none,identifier(none,'MsgSuggestionLevel'),[identifier(none,msg)]),function(none,function(none,identifier(none,suggestionLevel),[identifier(none,mn)]),[identifier(none,mn)]))],[],[assign(rodinpos('ModeProtocolMachine',act_stage,')'),[identifier(none,stage)],[overwrite(none,identifier(none,stage),set_extension(none,[couple(none,[identifier(none,mn),identifier(none,'StgNotRunning')])]))]),assign(rodinpos('ModeProtocolMachine',act_outgoing,'4'),[identifier(none,outgoing)],[overwrite(none,identifier(none,outgoing),set_extension(none,[couple(none,[identifier(none,mn),cartesian_product(none,set_subtraction(none,identifier(none,'MANAGERS'),set_extension(none,[identifier(none,mn)])),set_extension(none,[identifier(none,msg)]))])]))])],[]),event(rodinpos('ModeProtocolMachine',evt_DeliverOK,'?'),evt_DeliverOK,ordinary(none),[],[identifier(rodinpos('ModeProtocolMachine',[],'('),receiver),identifier(rodinpos('ModeProtocolMachine',[],'\''),sender)],[member(rodinpos('ModeProtocolMachine',grd_decl_sender,'*'),identifier(none,sender),identifier(none,'MANAGERS')),member(rodinpos('ModeProtocolMachine',grd_decl_receiver,'+'),identifier(none,receiver),domain(none,function(none,identifier(none,outgoing),[identifier(none,sender)])))],[],[assign(rodinpos('ModeProtocolMachine',act_incoming,','),[identifier(none,incoming)],[overwrite(none,identifier(none,incoming),set_extension(none,[couple(none,[identifier(none,receiver),overwrite(none,function(none,identifier(none,incoming),[identifier(none,receiver)]),set_extension(none,[couple(none,[identifier(none,sender),function(none,function(none,identifier(none,outgoing),[identifier(none,sender)]),[identifier(none,receiver)])])]))])]))]),assign(rodinpos('ModeProtocolMachine',act_outgoing,'-'),[identifier(none,outgoing)],[overwrite(none,identifier(none,outgoing),set_extension(none,[couple(none,[identifier(none,sender),domain_subtraction(none,set_extension(none,[identifier(none,receiver)]),function(none,identifier(none,outgoing),[identifier(none,sender)]))])]))])],[]),event(rodinpos('ModeProtocolMachine',evt_Lose,'B'),evt_Lose,ordinary(none),[],[identifier(rodinpos('ModeProtocolMachine',[],'*'),receiver),identifier(rodinpos('ModeProtocolMachine',[],'\''),sender)],[member(rodinpos('ModeProtocolMachine',grd_decl_sender,'('),identifier(none,sender),identifier(none,'MANAGERS')),member(rodinpos('ModeProtocolMachine',grd_decl_receiver,')'),identifier(none,receiver),domain(none,function(none,identifier(none,outgoing),[identifier(none,sender)]))),equal(rodinpos('ModeProtocolMachine',grd_lossy,'+'),identifier(none,lossy),boolean_true(none))],[],[assign(rodinpos('ModeProtocolMachine',act_outgoing,','),[identifier(none,outgoing)],[overwrite(none,identifier(none,outgoing),set_extension(none,[couple(none,[identifier(none,sender),domain_subtraction(none,set_extension(none,[identifier(none,receiver)]),function(none,identifier(none,outgoing),[identifier(none,sender)]))])]))])],[])])])],

[event_b_context(none,'ModeProtocolContext',[extends(none,[]),constants(none,[identifier(none,'MESSAGES'),identifier(none,'MdOff'),identifier(none,'MnAOC'),identifier(none,'MsgCurrentMode'),identifier(none,'MsgObservation'),identifier(none,'MsgSuggestedMode'),identifier(none,'MsgSuggestionLevel'),identifier(none,'PreferableMode'),identifier(none,'SUGGESTIONLEVELS'),identifier(none,'StgChanging'),identifier(none,'StgNotRunning'),identifier(none,'StgPostprocessing'),identifier(none,'StgReconsidering'),identifier(none,'StgReobserving'),identifier(none,'StgStoppable')]),axioms(none,[equal(rodinpos('ModeProtocolContext',axm_decl_SUGGESTIONLEVELS,'@'),identifier(none,'SUGGESTIONLEVELS'),interval(none,integer(none,0),integer(none,3))),equal(rodinpos('ModeProtocolContext',axm_decl_MESSAGES,w),identifier(none,'MESSAGES'),cartesian_product(none,cartesian_product(none,identifier(none,'MODES'),identifier(none,'OBSERVATIONS')),cartesian_product(none,identifier(none,'MODES'),identifier(none,'SUGGESTIONLEVELS')))),member(rodinpos('ModeProtocolContext',axm_decl_MdOff,'F'),identifier(none,'MdOff'),identifier(none,'MODES')),member(rodinpos('ModeProtocolContext',axm_decl_MnAOC,'H'),identifier(none,'MnAOC'),identifier(none,'MANAGERS')),member(rodinpos('ModeProtocolContext',axm_decl_MsgCurrentMode,'D'),identifier(none,'MsgCurrentMode'),total_function(none,identifier(none,'MESSAGES'),identifier(none,'MODES'))),member(rodinpos('ModeProtocolContext',axm_decl_MsgObservation,'='),identifier(none,'MsgObservation'),total_function(none,identifier(none,'MESSAGES'),identifier(none,'OBSERVATIONS'))),member(rodinpos('ModeProtocolContext',axm_decl_MsgSuggestedMode,'>'),identifier(none,'MsgSuggestedMode'),total_function(none,identifier(none,'MESSAGES'),identifier(none,'MODES'))),member(rodinpos('ModeProtocolContext',axm_decl_MsgSuggestionLevel,'?'),identifier(none,'MsgSuggestionLevel'),total_function(none,identifier(none,'MESSAGES'),identifier(none,'SUGGESTIONLEVELS'))),forall(rodinpos('ModeProtocolContext',axm_def_MsgCurrentMode,x),[identifier(none,msg)],implication(none,member(none,identifier(none,msg),identifier(none,'MESSAGES')),equal(none,function(none,identifier(none,'MsgCurrentMode'),[identifier(none,msg)]),function(none,event_b_first_projection_v2(none),[function(none,event_b_first_projection_v2(none),[identifier(none,msg)])])))),forall(rodinpos('ModeProtocolContext',axm_def_MsgObservation,y),[identifier(none,msg)],implication(none,member(none,identifier(none,msg),identifier(none,'MESSAGES')),equal(none,function(none,identifier(none,'MsgObservation'),[identifier(none,msg)]),function(none,event_b_second_projection_v2(none),[function(none,event_b_first_projection_v2(none),[identifier(none,msg)])])))),forall(rodinpos('ModeProtocolContext',axm_def_MsgSuggestedMode,z),[identifier(none,msg)],implication(none,member(none,identifier(none,msg),identifier(none,'MESSAGES')),equal(none,function(none,identifier(none,'MsgSuggestedMode'),[identifier(none,msg)]),function(none,event_b_first_projection_v2(none),[function(none,event_b_second_projection_v2(none),[identifier(none,msg)])])))),forall(rodinpos('ModeProtocolContext',axm_def_MsgSuggestionLevel,'A'),[identifier(none,msg)],implication(none,member(none,identifier(none,msg),identifier(none,'MESSAGES')),equal(none,function(none,identifier(none,'MsgSuggestionLevel'),[identifier(none,msg)]),function(none,event_b_second_projection_v2(none),[function(none,event_b_second_projection_v2(none),[identifier(none,msg)])])))),equal(rodinpos('ModeProtocolContext',axm_decl_STAGES,']'),identifier(none,'STAGES'),set_extension(none,[identifier(none,'StgNotRunning'),identifier(none,'StgReobserving'),identifier(none,'StgReconsidering'),identifier(none,'StgChanging'),identifier(none,'StgPostprocessing'),identifier(none,'StgStoppable')])),negation(rodinpos('ModeProtocolContext',axm_diff_StgNotRunning_StgReobserving,'^'),equal(none,identifier(none,'StgNotRunning'),identifier(none,'StgReobserving'))),negation(rodinpos('ModeProtocolContext',axm_diff_StgNotRunning_StgReconsidering,'_'),equal(none,identifier(none,'StgNotRunning'),identifier(none,'StgReconsidering'))),negation(rodinpos('ModeProtocolContext',axm_diff_StgNotRunning_StgChanging,'\140\'),equal(none,identifier(none,'StgNotRunning'),identifier(none,'StgChanging'))),negation(rodinpos('ModeProtocolContext',axm_diff_StgNotRunning_StgPostprocessing,a),equal(none,identifier(none,'StgNotRunning'),identifier(none,'StgPostprocessing'))),negation(rodinpos('ModeProtocolContext',axm_diff_StgNotRunning_StgStoppable,b),equal(none,identifier(none,'StgNotRunning'),identifier(none,'StgStoppable'))),negation(rodinpos('ModeProtocolContext',axm_diff_StgReobserving_StgReconsidering,c),equal(none,identifier(none,'StgReobserving'),identifier(none,'StgReconsidering'))),negation(rodinpos('ModeProtocolContext',axm_diff_StgReobserving_StgChanging,d),equal(none,identifier(none,'StgReobserving'),identifier(none,'StgChanging'))),negation(rodinpos('ModeProtocolContext',axm_diff_StgReobserving_StgPostProcessing,e),equal(none,identifier(none,'StgReobserving'),identifier(none,'StgPostprocessing'))),negation(rodinpos('ModeProtocolContext',axm_diff_StgReobserving_StgStoppable,f),equal(none,identifier(none,'StgReobserving'),identifier(none,'StgStoppable'))),negation(rodinpos('ModeProtocolContext',axm_diff_StgReconsidering_StgChanging,g),equal(none,identifier(none,'StgReconsidering'),identifier(none,'StgChanging'))),negation(rodinpos('ModeProtocolContext',axm_diff_StgReconsidering_StgPostprocessing,h),equal(none,identifier(none,'StgReconsidering'),identifier(none,'StgPostprocessing'))),negation(rodinpos('ModeProtocolContext',axm_diff_StgReconsidering_StgStoppable,i),equal(none,identifier(none,'StgReconsidering'),identifier(none,'StgStoppable'))),negation(rodinpos('ModeProtocolContext',axm_diff_StgChanging_StgPostprocessing,j),equal(none,identifier(none,'StgChanging'),identifier(none,'StgPostprocessing'))),negation(rodinpos('ModeProtocolContext',axm_diff_StgChanging_StgStoppable,k),equal(none,identifier(none,'StgChanging'),identifier(none,'StgStoppable'))),negation(rodinpos('ModeProtocolContext',axm_diff_StgPostprocessing_StgStoppable,l),equal(none,identifier(none,'StgPostprocessing'),identifier(none,'StgStoppable'))),member(rodinpos('ModeProtocolContext',axm_decl_PreferableMode,'B'),identifier(none,'PreferableMode'),total_surjection(none,cartesian_product(none,identifier(none,'MODES'),total_function(none,identifier(none,'MANAGERS'),identifier(none,'OBSERVATIONS'))),identifier(none,'MODES'))),forall(rodinpos('ModeProtocolContext',axm_preferToStayOrToMove,m),[identifier(none,md)],implication(none,member(none,identifier(none,md),identifier(none,'MODES')),exists(none,[identifier(none,p)],exists(none,[identifier(none,q)],conjunct(none,member(none,identifier(none,p),total_function(none,identifier(none,'MANAGERS'),identifier(none,'OBSERVATIONS'))),conjunct(none,member(none,identifier(none,q),total_function(none,identifier(none,'MANAGERS'),identifier(none,'OBSERVATIONS'))),conjunct(none,equal(none,function(none,identifier(none,'PreferableMode'),[couple(none,[identifier(none,md),identifier(none,p)])]),identifier(none,md)),negation(none,equal(none,function(none,identifier(none,'PreferableMode'),[couple(none,[identifier(none,md),identifier(none,q)])]),identifier(none,md))))))))))]),theorems(none,[forall(rodinpos('ModeProtocolContext',thm_inner_mode_mapping,'O'),[identifier(none,p)],implication(none,truth(none),forall(none,[identifier(none,q)],implication(none,conjunct(none,member(none,identifier(none,p),total_function(none,identifier(none,'MANAGERS'),identifier(none,'MODES'))),member(none,identifier(none,q),partial_function(none,identifier(none,'MANAGERS'),identifier(none,'MODES')))),member(none,overwrite(none,identifier(none,p),identifier(none,q)),total_function(none,identifier(none,'MANAGERS'),identifier(none,'MODES'))))))),forall(rodinpos('ModeProtocolContext',thm_outer_mode_mapping,'J'),[identifier(none,p)],implication(none,truth(none),forall(none,[identifier(none,q)],implication(none,conjunct(none,member(none,identifier(none,p),total_function(none,identifier(none,'MANAGERS'),total_function(none,identifier(none,'MANAGERS'),identifier(none,'MODES')))),member(none,identifier(none,q),partial_function(none,identifier(none,'MANAGERS'),total_function(none,identifier(none,'MANAGERS'),identifier(none,'MODES'))))),member(none,overwrite(none,identifier(none,p),identifier(none,q)),total_function(none,identifier(none,'MANAGERS'),total_function(none,identifier(none,'MANAGERS'),identifier(none,'MODES')))))))),forall(rodinpos('ModeProtocolContext',thm_outer_mode_maplet,'P'),[identifier(none,p)],implication(none,truth(none),forall(none,[identifier(none,q)],implication(none,conjunct(none,member(none,identifier(none,p),identifier(none,'MANAGERS')),member(none,identifier(none,q),total_function(none,identifier(none,'MANAGERS'),identifier(none,'MODES')))),member(none,set_extension(none,[couple(none,[identifier(none,p),identifier(none,q)])]),partial_function(none,identifier(none,'MANAGERS'),total_function(none,identifier(none,'MANAGERS'),identifier(none,'MODES')))))))),forall(rodinpos('ModeProtocolContext',thm_inner_obs_mapping,'N'),[identifier(none,p)],implication(none,truth(none),forall(none,[identifier(none,q)],implication(none,conjunct(none,member(none,identifier(none,p),total_function(none,identifier(none,'MANAGERS'),identifier(none,'OBSERVATIONS'))),member(none,identifier(none,q),partial_function(none,identifier(none,'MANAGERS'),identifier(none,'OBSERVATIONS')))),member(none,overwrite(none,identifier(none,p),identifier(none,q)),total_function(none,identifier(none,'MANAGERS'),identifier(none,'OBSERVATIONS'))))))),forall(rodinpos('ModeProtocolContext',thm_outer_obs_mapping,'M'),[identifier(none,p)],implication(none,truth(none),forall(none,[identifier(none,q)],implication(none,conjunct(none,member(none,identifier(none,p),total_function(none,identifier(none,'MANAGERS'),total_function(none,identifier(none,'MANAGERS'),identifier(none,'OBSERVATIONS')))),member(none,identifier(none,q),partial_function(none,identifier(none,'MANAGERS'),total_function(none,identifier(none,'MANAGERS'),identifier(none,'OBSERVATIONS'))))),member(none,overwrite(none,identifier(none,p),identifier(none,q)),total_function(none,identifier(none,'MANAGERS'),total_function(none,identifier(none,'MANAGERS'),identifier(none,'OBSERVATIONS')))))))),forall(rodinpos('ModeProtocolContext',thm_outer_obs_maplet,'R'),[identifier(none,p)],implication(none,truth(none),forall(none,[identifier(none,q)],implication(none,conjunct(none,member(none,identifier(none,p),identifier(none,'MANAGERS')),member(none,identifier(none,q),total_function(none,identifier(none,'MANAGERS'),identifier(none,'OBSERVATIONS')))),member(none,set_extension(none,[couple(none,[identifier(none,p),identifier(none,q)])]),partial_function(none,identifier(none,'MANAGERS'),total_function(none,identifier(none,'MANAGERS'),identifier(none,'OBSERVATIONS')))))))),forall(rodinpos('ModeProtocolContext',thm_inner_msg_mapping,'S'),[identifier(none,p)],implication(none,truth(none),forall(none,[identifier(none,q)],implication(none,conjunct(none,member(none,identifier(none,p),partial_function(none,identifier(none,'MANAGERS'),identifier(none,'MESSAGES'))),member(none,identifier(none,q),partial_function(none,identifier(none,'MANAGERS'),identifier(none,'MESSAGES')))),member(none,overwrite(none,identifier(none,p),identifier(none,q)),partial_function(none,identifier(none,'MANAGERS'),identifier(none,'MESSAGES'))))))),forall(rodinpos('ModeProtocolContext',thm_outer_msg_mapping,'T'),[identifier(none,p)],implication(none,truth(none),forall(none,[identifier(none,q)],implication(none,conjunct(none,member(none,identifier(none,p),total_function(none,identifier(none,'MANAGERS'),partial_function(none,identifier(none,'MANAGERS'),identifier(none,'MESSAGES')))),member(none,identifier(none,q),partial_function(none,identifier(none,'MANAGERS'),partial_function(none,identifier(none,'MANAGERS'),identifier(none,'MESSAGES'))))),member(none,overwrite(none,identifier(none,p),identifier(none,q)),total_function(none,identifier(none,'MANAGERS'),partial_function(none,identifier(none,'MANAGERS'),identifier(none,'MESSAGES')))))))),forall(rodinpos('ModeProtocolContext',thm_outer_msg_maplet,'U'),[identifier(none,p)],implication(none,truth(none),forall(none,[identifier(none,q)],implication(none,conjunct(none,member(none,identifier(none,p),identifier(none,'MANAGERS')),member(none,identifier(none,q),partial_function(none,identifier(none,'MANAGERS'),identifier(none,'MESSAGES')))),member(none,set_extension(none,[couple(none,[identifier(none,p),identifier(none,q)])]),partial_function(none,identifier(none,'MANAGERS'),partial_function(none,identifier(none,'MANAGERS'),identifier(none,'MESSAGES')))))))),forall(rodinpos('ModeProtocolContext',thm_inner_level_mapping,'L'),[identifier(none,p)],implication(none,truth(none),forall(none,[identifier(none,q)],implication(none,conjunct(none,member(none,identifier(none,p),total_function(none,identifier(none,'MANAGERS'),identifier(none,'SUGGESTIONLEVELS'))),member(none,identifier(none,q),partial_function(none,identifier(none,'MANAGERS'),identifier(none,'SUGGESTIONLEVELS')))),member(none,overwrite(none,identifier(none,p),identifier(none,q)),total_function(none,identifier(none,'MANAGERS'),identifier(none,'SUGGESTIONLEVELS'))))))),forall(rodinpos('ModeProtocolContext',thm_outer_level_mapping,'K'),[identifier(none,p)],implication(none,truth(none),forall(none,[identifier(none,q)],implication(none,conjunct(none,member(none,identifier(none,p),total_function(none,identifier(none,'MANAGERS'),total_function(none,identifier(none,'MANAGERS'),identifier(none,'SUGGESTIONLEVELS')))),member(none,identifier(none,q),partial_function(none,identifier(none,'MANAGERS'),total_function(none,identifier(none,'MANAGERS'),identifier(none,'SUGGESTIONLEVELS'))))),member(none,overwrite(none,identifier(none,p),identifier(none,q)),total_function(none,identifier(none,'MANAGERS'),total_function(none,identifier(none,'MANAGERS'),identifier(none,'SUGGESTIONLEVELS')))))))),forall(rodinpos('ModeProtocolContext',thm_outer_level_maplet,'Q'),[identifier(none,p)],implication(none,truth(none),forall(none,[identifier(none,q)],implication(none,conjunct(none,member(none,identifier(none,p),identifier(none,'MANAGERS')),member(none,identifier(none,q),total_function(none,identifier(none,'MANAGERS'),identifier(none,'SUGGESTIONLEVELS')))),member(none,set_extension(none,[couple(none,[identifier(none,p),identifier(none,q)])]),partial_function(none,identifier(none,'MANAGERS'),total_function(none,identifier(none,'MANAGERS'),identifier(none,'SUGGESTIONLEVELS'))))))))]),sets(none,[deferred_set(none,'MANAGERS'),deferred_set(none,'MODES'),deferred_set(none,'OBSERVATIONS'),deferred_set(none,'STAGES')])])],
[discharged('ModeProtocolMachine','INITIALISATION',inv_decl_currentMode),discharged('ModeProtocolMachine','INITIALISATION',inv_decl_incoming),discharged('ModeProtocolMachine','INITIALISATION',inv_ext_incoming),discharged('ModeProtocolMachine','INITIALISATION',inv_decl_observation),discharged('ModeProtocolMachine','INITIALISATION',inv_decl_stage),discharged('ModeProtocolMachine','INITIALISATION',inv_decl_suggestedMode),discharged('ModeProtocolMachine','INITIALISATION',inv_decl_suggestionLevel),discharged('ModeProtocolMachine','INITIALISATION',inv_decl_outgoing),discharged('ModeProtocolMachine','INITIALISATION',inv_no_outgoing),discharged('ModeProtocolMachine','INITIALISATION',inv_ext_outgoing),discharged('ModeProtocolMachine','INITIALISATION',inv_eq_outgoing),discharged('ModeProtocolMachine','INITIALISATION',inv_msg_outgoing),discharged('ModeProtocolMachine',evt_StartManagerExecution,inv_decl_currentMode),discharged('ModeProtocolMachine',evt_StartManagerExecution,inv_decl_incoming),discharged('ModeProtocolMachine',evt_StartManagerExecution,inv_ext_incoming),discharged('ModeProtocolMachine',evt_StartManagerExecution,inv_decl_observation),discharged('ModeProtocolMachine',evt_StartManagerExecution,inv_decl_stage),discharged('ModeProtocolMachine',evt_StartManagerExecution,inv_decl_suggestedMode),discharged('ModeProtocolMachine',evt_StartManagerExecution,inv_decl_suggestionLevel),discharged('ModeProtocolMachine',evt_StartManagerExecution,inv_no_outgoing),discharged('ModeProtocolMachine',evt_StartManagerExecution,inv_msg_outgoing),discharged('ModeProtocolMachine',evt_EndReobservation,inv_decl_observation),discharged('ModeProtocolMachine',evt_EndReobservation,inv_decl_stage),discharged('ModeProtocolMachine',evt_EndReobservation,inv_no_outgoing),discharged('ModeProtocolMachine',evt_EndReobservation,inv_msg_outgoing),discharged('ModeProtocolMachine',evt_EndReconsideration,inv_decl_stage),discharged('ModeProtocolMachine',evt_EndReconsideration,inv_decl_suggestedMode),discharged('ModeProtocolMachine',evt_EndReconsideration,inv_decl_suggestionLevel),discharged('ModeProtocolMachine',evt_EndReconsideration,inv_no_outgoing),discharged('ModeProtocolMachine',evt_EndReconsideration,inv_msg_outgoing),discharged('ModeProtocolMachine',evt_EndChange,inv_decl_currentMode),discharged('ModeProtocolMachine',evt_EndChange,inv_decl_stage),discharged('ModeProtocolMachine',evt_EndChange,inv_no_outgoing),discharged('ModeProtocolMachine',evt_EndChange,inv_msg_outgoing),discharged('ModeProtocolMachine',evt_PostprocessEnd,inv_decl_stage),discharged('ModeProtocolMachine',evt_PostprocessEnd,inv_no_outgoing),discharged('ModeProtocolMachine',evt_StopManagerExecution,inv_decl_stage),discharged('ModeProtocolMachine',evt_StopManagerExecution,inv_decl_outgoing),discharged('ModeProtocolMachine',evt_StopManagerExecution,inv_no_outgoing),discharged('ModeProtocolMachine',evt_StopManagerExecution,inv_ext_outgoing),discharged('ModeProtocolMachine',evt_StopManagerExecution,inv_eq_outgoing),discharged('ModeProtocolMachine',evt_StopManagerExecution,inv_msg_outgoing),discharged('ModeProtocolMachine',evt_DeliverOK,inv_decl_incoming),discharged('ModeProtocolMachine',evt_DeliverOK,inv_ext_incoming),discharged('ModeProtocolMachine',evt_DeliverOK,inv_decl_outgoing),discharged('ModeProtocolMachine',evt_DeliverOK,inv_no_outgoing),discharged('ModeProtocolMachine',evt_DeliverOK,inv_ext_outgoing),discharged('ModeProtocolMachine',evt_DeliverOK,inv_eq_outgoing),discharged('ModeProtocolMachine',evt_DeliverOK,inv_msg_outgoing),discharged('ModeProtocolMachine',evt_Lose,inv_decl_outgoing),discharged('ModeProtocolMachine',evt_Lose,inv_no_outgoing),discharged('ModeProtocolMachine',evt_Lose,inv_ext_outgoing),discharged('ModeProtocolMachine',evt_Lose,inv_eq_outgoing),discharged('ModeProtocolMachine',evt_Lose,inv_msg_outgoing)],_Error)).


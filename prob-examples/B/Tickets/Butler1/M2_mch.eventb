package(load_event_b_project([event_b_model(none,'M2',[sees(none,['C1','C2']),refines(none,'M1'),variables(none,[identifier(none,authorised),identifier(none,location),identifier(none,takeplace),identifier(none,validToks)]),invariant(none,[subset(rodinpos(inv5,internal_inv1I),identifier(none,validToks),identifier(none,'Token')),forall(rodinpos(inv6,'_EimQ4G-yEd-R1_JM9WS3rg'),[identifier(none,t)],implication(none,member(none,identifier(none,t),identifier(none,validToks)),subset(none,image(none,identifier(none,takeplace),set_extension(none,[function(none,identifier(none,rtok),[identifier(none,t)])])),image(none,identifier(none,authorised),set_extension(none,[function(none,identifier(none,utok),[identifier(none,t)])])))))]),theorems(none,[]),events(none,[event(rodinpos('INITIALISATION',internal_evt1),'INITIALISATION',ordinary(none),['INITIALISATION'],[],[],[],[assign(rodinpos(act1,internal_act1),[identifier(none,authorised)],[empty_set(none)]),assign(rodinpos(act2,internal_act2),[identifier(none,takeplace)],[cartesian_product(none,identifier(none,'Room'),identifier(none,'Activity'))]),assign(rodinpos(act3,internal_act3),[identifier(none,location)],[empty_set(none)]),assign(rodinpos(act4,internal_act4),[identifier(none,validToks)],[empty_set(none)])],[]),event(rodinpos('AddAuth',internal_evt2),'AddAuth',ordinary(none),['AddAuth'],[identifier(rodinpos([],internal_var2),a),identifier(rodinpos([],internal_var1),u)],[member(rodinpos(grd1,internal_grd1),identifier(none,u),identifier(none,'User')),member(rodinpos(grd2,internal_grd2),identifier(none,a),identifier(none,'Activity'))],[],[assign(rodinpos(act1,internal_act1),[identifier(none,authorised)],[union(none,identifier(none,authorised),set_extension(none,[couple(none,[identifier(none,u),identifier(none,a)])]))])],[]),event(rodinpos('CreateToken',internal_evt4),'CreateToken',ordinary(none),[],[identifier(rodinpos([],internal_var2),r),identifier(rodinpos([],internal_var3),t),identifier(rodinpos([],internal_var1),u)],[member(rodinpos(grd1,internal_grd1),identifier(none,u),identifier(none,'User')),member(rodinpos(grd2,internal_grd2),identifier(none,r),identifier(none,'Room')),member(rodinpos(grd3,internal_grd3),identifier(none,t),set_subtraction(none,identifier(none,'Token'),identifier(none,validToks))),equal(rodinpos(grd5,internal_element1),function(none,identifier(none,rtok),[identifier(none,t)]),identifier(none,r)),equal(rodinpos(grd6,internal_element2),function(none,identifier(none,utok),[identifier(none,t)]),identifier(none,u))],[],[assign(rodinpos(act1,internal_act1),[identifier(none,validToks)],[union(none,identifier(none,validToks),set_extension(none,[identifier(none,t)]))])],[]),event(rodinpos('Enter',internal_evt3),'Enter',ordinary(none),['Enter'],[identifier(rodinpos([],internal_var2),r),identifier(rodinpos([],internal_var3),t),identifier(rodinpos([],internal_var1),u)],[member(rodinpos(grd1,internal_grd1),identifier(none,u),set_subtraction(none,identifier(none,'User'),domain(none,identifier(none,location)))),member(rodinpos(grd2,internal_element1),identifier(none,t),identifier(none,validToks)),equal(rodinpos(grd3,internal_grd3),identifier(none,r),function(none,identifier(none,rtok),[identifier(none,t)])),equal(rodinpos(grd4,internal_grd4),identifier(none,u),function(none,identifier(none,utok),[identifier(none,t)]))],[],[assign(rodinpos(act1,internal_act1),[identifier(none,location)],[union(none,identifier(none,location),set_extension(none,[couple(none,[identifier(none,u),identifier(none,r)])]))]),assign(rodinpos(act4,internal_element3),[identifier(none,validToks)],[set_subtraction(none,identifier(none,validToks),set_extension(none,[identifier(none,t)]))])],[]),event(rodinpos('Leave',evt1),'Leave',ordinary(none),['Leave'],[identifier(rodinpos([],internal_var2),r),identifier(rodinpos([],internal_var1),u)],[member(rodinpos(grd1,internal_grd1),couple(none,[identifier(none,u),identifier(none,r)]),identifier(none,location))],[],[assign(rodinpos(act1,internal_act1),[identifier(none,location)],[set_subtraction(none,identifier(none,location),set_extension(none,[couple(none,[identifier(none,u),identifier(none,r)])]))])],[]),event(rodinpos('RescindToken',internal_evt5),'RescindToken',ordinary(none),[],[identifier(rodinpos([],internal_var1),t)],[member(rodinpos(grd1,internal_grd1),identifier(none,t),identifier(none,validToks))],[],[assign(rodinpos(act1,internal_act1),[identifier(none,validToks)],[set_subtraction(none,identifier(none,validToks),set_extension(none,[identifier(none,t)]))])],[]),event(rodinpos('RemAuth',evt0),'RemAuth',ordinary(none),['RemAuth'],[identifier(rodinpos([],internal_var2),a),identifier(rodinpos([],internal_var1),u)],[member(rodinpos(grd3,internal_element1),couple(none,[identifier(none,u),identifier(none,a)]),identifier(none,authorised)),implication(rodinpos(grd5,internal_element2),member(none,identifier(none,u),domain(none,identifier(none,location))),not_member(none,couple(none,[function(none,identifier(none,location),[identifier(none,u)]),identifier(none,a)]),identifier(none,takeplace))),forall(rodinpos(grd6,'_EiqiUG-yEd-R1_JM9WS3rg'),[identifier(none,t)],implication(none,conjunct(none,member(none,identifier(none,t),identifier(none,validToks)),equal(none,identifier(none,u),function(none,identifier(none,utok),[identifier(none,t)]))),not_member(none,couple(none,[function(none,identifier(none,rtok),[identifier(none,t)]),identifier(none,a)]),identifier(none,takeplace))))],[],[assign(rodinpos(act1,internal_act1),[identifier(none,authorised)],[set_subtraction(none,identifier(none,authorised),set_extension(none,[couple(none,[identifier(none,u),identifier(none,a)])]))])],[])])]),event_b_model(none,'M1',[sees(none,['C1']),variables(none,[identifier(none,authorised),identifier(none,location),identifier(none,takeplace)]),invariant(none,[member(rodinpos(inv1,internal_inv1I),identifier(none,authorised),relations(none,identifier(none,'User'),identifier(none,'Activity'))),member(rodinpos(inv2,internal_inv2I),identifier(none,takeplace),relations(none,identifier(none,'Room'),identifier(none,'Activity'))),member(rodinpos(inv3,internal_inv3I),identifier(none,location),partial_function(none,identifier(none,'User'),identifier(none,'Room'))),forall(rodinpos(inv4,internal_inv5I),[identifier(none,u),identifier(none,r)],implication(none,conjunct(none,member(none,identifier(none,u),domain(none,identifier(none,location))),equal(none,function(none,identifier(none,location),[identifier(none,u)]),identifier(none,r))),subset(none,image(none,identifier(none,takeplace),set_extension(none,[identifier(none,r)])),image(none,identifier(none,authorised),set_extension(none,[identifier(none,u)])))))]),theorems(none,[]),events(none,[event(rodinpos('INITIALISATION',internal_evt1),'INITIALISATION',ordinary(none),[],[],[],[],[assign(rodinpos(act1,internal_act1),[identifier(none,authorised)],[empty_set(none)]),assign(rodinpos(act2,internal_act2),[identifier(none,takeplace)],[cartesian_product(none,identifier(none,'Room'),identifier(none,'Activity'))]),assign(rodinpos(act3,internal_act3),[identifier(none,location)],[empty_set(none)])],[]),event(rodinpos('AddAuth',internal_evt2),'AddAuth',ordinary(none),[],[identifier(rodinpos([],internal_var2),a),identifier(rodinpos([],internal_var1),u)],[member(rodinpos(grd1,internal_grd1),identifier(none,u),identifier(none,'User')),member(rodinpos(grd2,internal_grd2),identifier(none,a),identifier(none,'Activity'))],[],[assign(rodinpos(act1,internal_act1),[identifier(none,authorised)],[union(none,identifier(none,authorised),set_extension(none,[couple(none,[identifier(none,u),identifier(none,a)])]))])],[]),event(rodinpos('Enter',internal_evt3),'Enter',ordinary(none),[],[identifier(rodinpos([],internal_var2),r),identifier(rodinpos([],internal_var1),u)],[member(rodinpos(grd1,internal_grd1),identifier(none,u),set_subtraction(none,identifier(none,'User'),domain(none,identifier(none,location)))),member(rodinpos(grd2,internal_grd2),identifier(none,r),identifier(none,'Room')),subset(rodinpos(grd3,internal_grd3),image(none,identifier(none,takeplace),set_extension(none,[identifier(none,r)])),image(none,identifier(none,authorised),set_extension(none,[identifier(none,u)])))],[],[assign(rodinpos(act1,internal_act1),[identifier(none,location)],[union(none,identifier(none,location),set_extension(none,[couple(none,[identifier(none,u),identifier(none,r)])]))])],[]),event(rodinpos('Leave',evt1),'Leave',ordinary(none),[],[identifier(rodinpos([],internal_var2),r),identifier(rodinpos([],internal_var1),u)],[member(rodinpos(grd1,internal_grd1),couple(none,[identifier(none,u),identifier(none,r)]),identifier(none,location))],[],[assign(rodinpos(act1,internal_act1),[identifier(none,location)],[set_subtraction(none,identifier(none,location),set_extension(none,[couple(none,[identifier(none,u),identifier(none,r)])]))])],[]),event(rodinpos('RemAuth',evt0),'RemAuth',ordinary(none),[],[identifier(rodinpos([],internal_var2),a),identifier(rodinpos([],internal_var1),u)],[member(rodinpos(grd3,internal_element2),couple(none,[identifier(none,u),identifier(none,a)]),identifier(none,authorised)),implication(rodinpos(grd4,'_xjDvADXFEeCrPr7uq9wfQQ'),member(none,identifier(none,u),domain(none,identifier(none,location))),not_member(none,couple(none,[function(none,identifier(none,location),[identifier(none,u)]),identifier(none,a)]),identifier(none,takeplace)))],[],[assign(rodinpos(act1,internal_act1),[identifier(none,authorised)],[set_subtraction(none,identifier(none,authorised),set_extension(none,[couple(none,[identifier(none,u),identifier(none,a)])]))])],[])])])],[event_b_context(none,'C1',[extends(none,[]),constants(none,[]),axioms(none,[not_equal(rodinpos(axm1,internal_axm1A),identifier(none,'Room'),empty_set(none)),not_equal(rodinpos(axm2,internal_axm2A),identifier(none,'Activity'),empty_set(none))]),theorems(none,[exists(rodinpos(thm1,internal_thm1T),[identifier(none,s)],member(none,identifier(none,s),relations(none,identifier(none,'Room'),identifier(none,'Activity'))))]),sets(none,[deferred_set(none,'Activity'),deferred_set(none,'Room'),deferred_set(none,'User')])]),event_b_context(none,'C2',[extends(none,['C1']),constants(none,[identifier(none,rtok),identifier(none,utok)]),axioms(none,[member(rodinpos(axm1,internal_axm1A),identifier(none,rtok),total_function(none,identifier(none,'Token'),identifier(none,'Room'))),member(rodinpos(axm2,internal_element1A),identifier(none,utok),total_function(none,identifier(none,'Token'),identifier(none,'User')))]),theorems(none,[]),sets(none,[deferred_set(none,'Token')])])],[discharged('M2','INITIALISATION',inv6),discharged('M2','AddAuth',inv6),discharged('M2','Enter',inv6),discharged('M2','RescindToken',inv6),discharged('M2','RemAuth',inv6),discharged('M1','INITIALISATION',inv3),discharged('M1','INITIALISATION',inv4),discharged('M1','AddAuth',inv4),discharged('M1','Enter',inv3),discharged('M1','Enter',inv4),discharged('M1','Leave',inv3),discharged('M1','Leave',inv4),discharged('M1','RemAuth',inv4)],_Error)).

